<!DOCTYPE html>
<html>
<head>
    <title>Test Dynasty All-in-One Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #0a0e27;
            color: white;
        }
        h1 { color: #d4af37; }
        .test-result { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { background: #0a4; }
        .error { background: #a04; }
        button {
            padding: 15px 30px;
            font-size: 18px;
            background: #8b00ff;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover { background: #a020ff; }
        #loading { display: none; color: #d4af37; }
    </style>
</head>
<body>
    <h1>🎮 Dynasty All-in-One Game - Test Suite</h1>
    
    <h2>File Checks</h2>
    <div id="file-check" class="test-result">Checking...</div>
    
    <h2>Load Test</h2>
    <div id="load-test" class="test-result">Ready to test</div>
    <div id="loading">⏳ Loading game in new window...</div>
    
    <h2>Actions</h2>
    <button onclick="testFileExists()">1. Test File Exists</button>
    <button onclick="openGame()">2. Open Game</button>
    <button onclick="runFullTest()">3. Run Full Test</button>
    
    <h2>Expected Results</h2>
    <ul>
        <li>✅ Game file loads instantly (&lt;1 second)</li>
        <li>✅ Class selection screen appears</li>
        <li>✅ Can select a class</li>
        <li>✅ Game starts when clicking "Start Adventure"</li>
        <li>✅ Player can move with WASD/arrows</li>
        <li>✅ Enemies visible on screen</li>
        <li>✅ UI panels work (stats, abilities)</li>
    </ul>
    
    <script>
        function testFileExists() {
            document.getElementById('file-check').innerHTML = 'Testing...';
            fetch('dynasty-all-in-one.html')
                .then(r => {
                    if (!r.ok) throw new Error('File not found');
                    return r.text();
                })
                .then(content => {
                    const lines = content.split('\n').length;
                    const size = (content.length / 1024).toFixed(2);
                    document.getElementById('file-check').className = 'test-result success';
                    document.getElementById('file-check').innerHTML = `
                        ✅ SUCCESS!<br>
                        📄 File: dynasty-all-in-one.html<br>
                        📏 Size: ${size} KB<br>
                        📝 Lines: ${lines}<br>
                        ✨ Ready to play!
                    `;
                })
                .catch(e => {
                    document.getElementById('file-check').className = 'test-result error';
                    document.getElementById('file-check').innerHTML = '❌ ERROR: ' + e.message;
                });
        }
        
        function openGame() {
            document.getElementById('loading').style.display = 'block';
            const gameWindow = window.open('dynasty-all-in-one.html', '_blank');
            
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('load-test').className = 'test-result success';
                document.getElementById('load-test').innerHTML = `
                    ✅ Game opened in new window!<br>
                    👉 Check the new window for:<br>
                    &nbsp;&nbsp;&nbsp;• Class selection screen<br>
                    &nbsp;&nbsp;&nbsp;• 8 character classes<br>
                    &nbsp;&nbsp;&nbsp;• "Start Adventure" button<br>
                    <br>
                    📝 Instructions:<br>
                    1. Select a class by clicking on it<br>
                    2. Click "Start Adventure"<br>
                    3. Use WASD or Arrow keys to move<br>
                    4. Click enemies to attack<br>
                    5. Press 1-4 for abilities
                `;
            }, 2000);
        }
        
        function runFullTest() {
            testFileExists();
            setTimeout(() => openGame(), 1500);
        }
        
        // Auto-run test on page load
        window.onload = () => testFileExists();
    </script>
</body>
</html>
